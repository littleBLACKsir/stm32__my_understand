# what is stm32

官方解释：

```
STM32系列专为要求高性能、低成本、低功耗的嵌入式应用设计的ARM Cortex®-M0，M0+，M3, M4和M7内核（ST's product portfolio contains a comprehensive range of microcontrollers, from robust, low-cost 8-bit MCUs up to 32-bit ARM-based Cortex®-M0 and M0+, Cortex®-M3, Cortex®-M4 Flash microcontrollers with a great choice of peripherals. ST has also extended this range to include an ultra-low-power MCU platform) 。按内核架构分为不同产品：
主流产品（STM32F0、STM32F1、STM32F3）、超低功耗产品（STM32L0、STM32L1、STM32L4、STM32L4+）、高性能产品（STM32F2、STM32F4、STM32F7、STM32H7

•新的基于ARM内核的32位MCU系列   

  –标准的ARM架构     –内核为ARM公司为要求高性能、低成本、低功耗的嵌入式应用专门设计的Cortex-M内核

 •超前的体系结构 

   –高性能     –低电压      –低功耗     –创新的内核以及外设

 •简单易用/自由/低风险

Cortex-M3系列属于ARMv7架构

ARMv7架构定义了三大分工明确的系列：

     “A”系列：面向尖端的基于虚拟内存的操作系统和用户应用
     “R”系列：针对实时系统；
     “M”系列：对微控制器。
STM32F1属于Cortex-M系列中的Cortex-M3内核，采用ARMv7-M架构。STM32F4属于Cortex-M4系列采用ARMv7-ME架构。Cortex-A5/A8采用ARMv7-A架构。传统的ARM7系列采用的是ARMv4T架构。
————————————————
版权声明：本文为CSDN博主「誓约胜利之舰」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_40818798/java/article/details/79240374
```

个人理解：

​	一种比51牛逼的单片机，各种功能，各种外设都比较多，对应的，要学的东西也很多。

## <font color="blue">关于STM32F1: </font>

```
简介
ARM公司的高性能”Cortex-M3”内核
1.25DMips/MHz,而ARM7TDMI只有0.95DMips/MHz
一流的外设
1μs的双12位ADC，4兆位/秒的UART，18兆位/秒的SPI，18MHz的I/O翻转速度
低功耗
在72MHz时消耗36mA(所有外设处于工作状态)，待机时下降到2μA
最大的集成度
复位电路、低电压检测、调压器、精确的RC振荡器等
简单的结构和易用的工具
参数
2.0V-3.6V供电
兼容5V的I/O管脚
优异的安全时钟模式
带唤醒功能的低功耗模式
内部RC振荡器
内嵌复位电路
工作温度范围：
-40°C至+85°C或105°C
101性能
36MHz CPU　多达16K字节SRAM 1x12位ADC温度传感器
103性能
特点
内核：ARM32位Cortex-M3 CPU，最高工作频率72MHz，1.25DMIPS/MHz。单周期乘法和硬件除法。
存储器：片上集成32-512KB的Flash存储器。6-64KB的SRAM存储器。
时钟、复位和电源管理：2.0-3.6V的电源供电和I/O接口的驱动电压。上电复位（POR）、掉电复位（PDR）和可编程的电压探测器（PVD）。4-16MHz的晶振。内嵌出厂前调校的8MHz RC振荡电路。内部40 kHz的RC振荡电路。用于CPU时钟的PLL。带校准用于RTC的32kHz的晶振。
低功耗：3种低功耗模式：休眠，停止，待机模式。为RTC和备份寄存器供电的VBAT。
调试模式：串行调试（SWD）和JTAG接口。
DMA：12通道DMA控制器。支持的外设：定时器，ADC，DAC，SPI，IIC和UART。
3个12位的us级的A/D转换器（16通道）：A/D测量范围：0-3.6V。双采样和保持能力。片上集成一个温度传感器。
2通道12位D/A转换器：STM32F103xC,STM32F103xD,STM32F103xE独有。
最多高达112个的快速I/O端口：根据型号的不同，有26，37，51，80，和112的I/O端口，所有的端口都可以映射到16个外部中断向量。除了模拟输入，所有的都可以接受5V以内的输入。
最多多达11个定时器：4个16位定时器，每个定时器有4个IC/OC/PWM或者脉冲计数器。2个16位的6通道高级控制定时器：最多6个通道可用于PWM输出。2个看门狗定时器（独立看门狗和窗口看门狗）。Systick定时器：24位倒计数器。2个16位基本定时器用于驱动DAC。
最多多达13个通信接口：2个IIC接口（SMBus/PMBus）。5个USART接口（ISO7816接口，LIN，IrDA兼容，调试控制）。3个SPI接口（18 Mbit/s），两个和IIS复用。CAN接口（2.0B）。USB 2.0全速接口。SDIO接口。
ECOPACK封装：STM32F103xx系列微控制器采用ECOPACK封装形式。
系统作用
1、集成嵌入式Flash和SRAM存储器的ARM Cortex-M3内核。和8/16位设备相比，ARM Cortex-M3 32位RISC处理器提供了更高的代码效率。STM32F103xx微控制器带有一个嵌入式的ARM核，所以可以兼容所有的ARM工具和软件。

2、嵌入式Flash存储器和RAM存储器：内置多达512KB的嵌入式Flash，可用于存储程序和数据。多达64KB的嵌入式SRAM可以以CPU的时钟速度进行读写（不待等待状态）。

3、可变静态存储器（FSMC）：FSMC嵌入在STM32F103xC,STM32F103xD,STM32F103xE中，带有4个片选，支持四种模式：Flash,RAM,PSRAM,NOR和NAND。3个FSMC中断线经过OR后连接到NVIC。没有读/写FIFO，除PCCARD之外，代码都是从外部存储器执行，不支持Boot，目标频率等于SYSCLK/2，所以当系统时钟是72MHz时，外部访问按照36MHz进行。

4、嵌套矢量中断控制器（NVIC）：可以处理43个可屏蔽中断通道（不包括Cortex-M3的16根中断线），提供16个中断优先级。紧密耦合的NVIC实现了更低的中断处理延迟，直接向内核传递中断入口向量表地址，紧密耦合的NVIC内核接口，允许中断提前处理，对后到的更高优先级的中断进行处理，支持尾链，自动保存处理器状态，中断入口在中断退出时自动恢复，不需要指令干预。

5、外部中断/事件控制器（EXTI）：外部中断/事件控制器由用于19条产生中断/事件请求的边沿探测器线组成。每条线可以被单独配置用于选择触发事件（上升沿，下降沿，或者两者都可以），也可以被单独屏蔽。有一个挂起寄存器来维护中断请求的状态。当外部线上出现长度超过内部APB2时钟周期的脉冲时，EXTI能够探测到。多达112个GPIO连接到16个外部中断线。

6、时钟和启动：在启动的时候还是要进行系统时钟选择，但复位的时候内部8MHz的晶振被选用作CPU时钟。可以选择一个外部的4-16MHz的时钟，并且会被监视来判定是否成功。

在这期间，控制器被禁止并且软件中断管理也随后被禁止。同时，如果有需要（例如碰到一个间接使用的晶振失败），PLL时钟的中断管理完全可用。多个预比较器可以用于配置AHB频率，包括高速APB(PB2)和低速APB（APB1），高速APB最高的频率为72MHz，低速APB最高的频率为36MHz。


7、Boot模式：在启动的时候，Boot引脚被用来在3种Boot选项中选择一种：从用户Flash导入，从系统存储器导入，从SRAM导入。Boot导入程序位于系统存储器，用于通过USART1重新对Flash存储器编程。

8、电源供电方案：VDD ，电压范围为2.0V-3.6V，外部电源通过VDD引脚提供，用于I/O和内部调压器。VSSA和VDDA，电压范围为2.0-3.6V，外部模拟电压输入，用于ADC，复位模块，RC和PLL，在VDD范围之内（ADC被限制在2.4V），VSSA和VDDA必须相应连接到VSS和VDD。
VBAT，电压范围为1.8-3.6V，当VDD无效时为RTC，外部32KHz晶振和备份寄存器供电（通过电源切换实现）。

9、电源管理：设备有一个完整的上电复位（POR）和掉电复位（PDR）电路。这条电路一直有效，用于确保从2V启动或者掉到2V的时候进行一些必要的操作。
当VDD低于一个特定的下限VPOR/PDR时，不需要外部复位电路，设备也可以保持在复位模式。设备特有一个嵌入的可编程电压探测器（PVD），PVD用于检测VDD，并且和VPVD限值比较，当VDD低于VPVD或者VDD大于VPVD时会产生一个中断。
中断服务程序可以产生一个警告信息或者将MCU置为一个安全状态。PVD由软件使能。

10、电压调节：调压器有3种运行模式：主（MR），低功耗（LPR）和掉电。MR用在传统意义上的调节模式（运行模式），LPR用在停止模式，掉电用在待机模式：调压器输出为高阻，核心电路掉电，包括零消耗（寄存器和SRAM的内容不会丢失）。

11、低功耗模式：STM32F103xx支持3种低功耗模式，从而在低功耗，短启动时间和可用唤醒源之间达到一个最好的平衡点。休眠模式：只有CPU停止工作，所有外设继续运行，在中断/事件发生时唤醒CPU；停止模式：允许以最小的功耗来保持SRAM和寄存器的内容。
1.8V区域的时钟都停止，PLL，HSI和HSE RC振荡器被禁能，调压器也被置为正常或者低功耗模式。设备可以通过外部中断线从停止模式唤醒。
外部中断源可以使16个外部中断线之一，PVD输出或者TRC警告。待机模式：追求最少的功耗，内部调压器被关闭，这样1.8V区域断电。PLL,HSI和HSE RC振荡器也被关闭。在进入待机模式之后，除了备份寄存器和待机电路，SRAM和寄存器的内容也会丢失。
当外部复位（NRST引脚），IWDG复位，WKUP引脚出现上升沿或者TRC警告发生时，设备退出待机模式。进入停止模式或者待机模式时，TRC,IWDG和相关的时钟源不会停止。
```





